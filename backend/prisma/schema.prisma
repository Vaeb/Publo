// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Publication {
    id        Int      @id @default(autoincrement())
    title     String   @unique
    doi       String   @unique
    type      String
    year      Int
    volume    String?
    link      String?
    authors   Author[]
    venue     Venue?   @relation(fields: [venueId], references: [id])
    venueId   Int?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("publications")
}

model Author {
    id           Int           @default(autoincrement())
    firstName    String
    lastName     String        @id
    orcid        String?
    dob          String?
    publications Publication[]
    createdAt    DateTime      @default(now())
    updatedAt    DateTime      @updatedAt

    @@unique([firstName, lastName])
    @@map("authors")
}

model Venue {
    id           Int           @id @default(autoincrement())
    title        String        @unique
    type         String
    publications Publication[]
    createdAt    DateTime      @default(now())
    updatedAt    DateTime      @updatedAt

    @@map("venues")
}

model User {
    id        Int      @id @default(autoincrement())
    username  String   @unique
    email     String   @unique
    password  String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("users")
}
